
# 重大革新！Dubbo 3.0 来了
雨多田光，2018-01-09

8 日夜间，Dubbo 创始人之一**梁飞**在 `Dubbo 交流群`里透露了 Dubbo 3.0 正在动工的消息。

![Dubbo 3.0](./images/Dubbo-3.0.png)

梁飞：**Dubbo 3.0**（即 `HSF 3.0`，对内对外两个名字）开工了，
将全面采用**无阻塞流式编程模型**，采用 `backpressure` 代替 timeout `压力检测模型`，
**目标是节省阿里服务器一半以上**，已正式全职开发梯队投入，初步 Runtime 已在验证，3 月底在线上应用投入使用。


## 重大革新
**新的 Dubbo 内核**与 Dubbo 2.0 完全不同，但它`兼容 2.0`。
Dubbo 3.0 将以 **Streaming** 为内核，而不再是 2.0 时代的 RPC，但是 `RPC 会在 3.0 中变成远程 Streaming 对接`的一种可选形态。
梁飞给出了一个**内核接口：Streaming docking（Streaming）/流式对接**，他说`一切服务治理将围绕这个内核接口进行扩展`。
而 `Streaming 通道`与 gRPC 类似，支持 HTTP/2，同时 REST 接口也会受到一等公民支持，
但是梁飞也表示此次`在通讯上的改动并不大，重点是在服务治理和编程模型上`。

说到**编程模型的革新**，梁飞透露，此次 Dubbo 3.0 能够开工，
主要也是因为**新特性将去掉一切阻塞，以“一切同步”为第一目标**，
在对 I/O 密集业务的处理上，它能够提高机器利用率，使得一半机器的成本被节省下来。
他还表示，其实 `Dubbo 3.0 技术选型重大变更的驱动因素`，也就是**降低成本**，
因为`在将系统服务化后，全业务线的机器都在等待返回数据，负载压不上去，机器浪费严重`。

这个**去阻塞化的模式**，其实就是使用了“[响应式编程](https://zh.wikipedia.org/wiki/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B)”模式
（[Reactive Programming](https://en.wikipedia.org/wiki/Reactive_programming)）。
梁飞介绍，在 Dubbo 3.0 中，**reactive 将成为核心**，会做到客户端、服务端、缓存和数据库，**全程无阻塞**。
在数据库上，JDBC 驱动将进行更改，同时，为了性能，还会配合使用阿里毕玄对 JVM 协程的改造。
**更为重要的是，这个重大变更，不仅体现在 Dubbo 上，它也将影响到阿里 10 年来积累的中间件。**

群里有人问到**是否会采用 Service Mesh？**
梁飞表示，Dubbo 3.0 将**支持可选 mesh，多加一层 IPC**，这主要是为了兼容老系统；而内部则会优先尝试`内嵌模式`。
他说**代理模式 Ops 可独立升级框架，减少业务侵入**，而**内嵌模式可以带业务测试、部署节点少、稳定性检测方便**。
同时，可以将 Dubbo 3.0 启动为**独立进程，由 dubbo-mesh 进行 IPC，路由、负载均衡和熔断机制将由独立进程控制**。


## 共同关注
目前 Dubbo 3.0 已正式投入全职开发梯队，初步 Runtime 已在验证，3 月底将在线上应用投入使用。

自去年 11 月份阿里公开宣布 [重启维护 Dubbo](http://www.infoq.com/cn/news/2017/11/Ali-restart-maintenance-Dubbo/) 之后，我们一直在关注着 Dubbo 的进展。
同时，推动技术进步，欢迎有兴趣、善于写技术框架的同学加入 Dubbo 3.0 的开发。

Dubbo 3.0 主力开发 [李鼎（哲良）](https://github.com/oldratlee)


[原文](https://mp.weixin.qq.com/s/eVYx-tUIMYtAk5wP-qkdkw)
